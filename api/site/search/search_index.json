{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Bem-vindo \u00e0 Documenta\u00e7\u00e3o da Minha API","text":"<p>Esta documenta\u00e7\u00e3o fornece informa\u00e7\u00f5es detalhadas sobre os endpoints e funcionalidades da API.</p>"},{"location":"#introducao","title":"Introdu\u00e7\u00e3o","text":"<p>Esta API permite acessar dados relacionados a uvas, vinhos e derivados. Aqui voc\u00ea encontrar\u00e1 detalhes sobre como interagir com a API, incluindo exemplos de requisi\u00e7\u00f5es e descri\u00e7\u00f5es dos endpoints.</p>"},{"location":"#endpoints-principais","title":"Endpoints Principais","text":"<ul> <li>GET /production: Retorna dados de produ\u00e7\u00e3o de vinhos e derivados.</li> <li>GET /processing: Fornece informa\u00e7\u00f5es sobre o processamento de uvas.</li> <li>GET /commercialization: Exibe dados sobre a comercializa\u00e7\u00e3o de vinhos e derivados.</li> <li>POST /login: Realiza autentica\u00e7\u00e3o de usu\u00e1rios e gera um token de acesso.</li> <li>GET /registration: Exibe o formul\u00e1rio de registro.</li> </ul>"},{"location":"#exemplos-de-uso","title":"Exemplos de Uso","text":"<p>!!swagger openapi.json!! Para realizar uma chamada \u00e0 API, voc\u00ea pode usar um comando similar a este:</p> <p>```bash curl -X GET \"http://localhost:8000/production?year=2022\" -H \"Authorization: Bearer \""},{"location":"api_endpoints/","title":"Documenta\u00e7\u00e3o dos Endpoints da API","text":""},{"location":"api_endpoints/#1-post-login","title":"1. POST /login","text":""},{"location":"api_endpoints/#descricao","title":"Descri\u00e7\u00e3o","text":"<p>Autentica um usu\u00e1rio e retorna um token de acesso.</p>"},{"location":"api_endpoints/#parametros","title":"Par\u00e2metros","text":"<ul> <li>username: Nome de usu\u00e1rio (string, obrigat\u00f3rio).</li> <li>password: Senha do usu\u00e1rio (string, obrigat\u00f3rio).</li> </ul>"},{"location":"api_endpoints/#exemplo-de-requisicao","title":"Exemplo de Requisi\u00e7\u00e3o","text":"<pre><code>POST /login\nContent-Type: application/x-www-form-urlencoded\n\nusername=usuario_exemplo&amp;password=senha_exemplo\n</code></pre>"},{"location":"api_endpoints/#exemplo-de-resposta","title":"Exemplo de Resposta","text":"<pre><code>{\n  \"access_token\": \"token_de_acesso\",\n  \"token_type\": \"bearer\"\n}\n</code></pre>"},{"location":"api_endpoints/#2-get-production","title":"2. GET /production","text":""},{"location":"api_endpoints/#descricao_1","title":"Descri\u00e7\u00e3o","text":"<p>Retorna dados sobre a produ\u00e7\u00e3o de vinhos, sucos e derivados.</p>"},{"location":"api_endpoints/#parametros_1","title":"Par\u00e2metros","text":"<ul> <li>year: Ano de refer\u00eancia (integer, obrigat\u00f3rio).</li> </ul>"},{"location":"api_endpoints/#exemplo-de-requisicao_1","title":"Exemplo de Requisi\u00e7\u00e3o","text":"<pre><code>GET /production?year=2020\nAuthorization: Bearer token_de_acesso\n</code></pre>"},{"location":"api_endpoints/#exemplo-de-resposta_1","title":"Exemplo de Resposta","text":"<pre><code>[\n  {\n    \"category\": \"VINHO DE MESA\",\n    \"product\": \"Tinto\",\n    \"quantity\": 103916391,\n    \"unit\": \"L\",\n    \"measurement\": \"volume\",\n    \"year\": 2020\n  }\n]\n</code></pre>"},{"location":"api_endpoints/#3-get-processing","title":"3. GET /processing","text":""},{"location":"api_endpoints/#descricao_2","title":"Descri\u00e7\u00e3o","text":"<p>Retorna a quantidade de uvas processadas.</p>"},{"location":"api_endpoints/#parametros_2","title":"Par\u00e2metros","text":"<ul> <li>year: Ano de refer\u00eancia (integer, obrigat\u00f3rio).</li> </ul>"},{"location":"api_endpoints/#exemplo-de-requisicao_2","title":"Exemplo de Requisi\u00e7\u00e3o","text":"<pre><code>GET /processing?year=2020\nAuthorization: Bearer token_de_acesso\n</code></pre>"},{"location":"api_endpoints/#exemplo-de-resposta_2","title":"Exemplo de Resposta","text":"<pre><code>[\n  {\n    \"group\": \"Vin\u00edferas\",\n    \"category\": \"TINTAS\",\n    \"farm\": \"TIAlicante Bouschet\",\n    \"quantity\": 2272985,\n    \"unit\": \"Kg\",\n    \"measurement\": \"mass\",\n    \"year\": 2020\n  }\n]\n</code></pre>"},{"location":"api_endpoints/#4-get-commercialization","title":"4. GET /commercialization","text":""},{"location":"api_endpoints/#descricao_3","title":"Descri\u00e7\u00e3o","text":"<p>Retorna dados sobre a comercializa\u00e7\u00e3o de vinhos e derivados.</p>"},{"location":"api_endpoints/#parametros_3","title":"Par\u00e2metros","text":"<ul> <li>year: Ano de refer\u00eancia (integer, obrigat\u00f3rio).</li> </ul>"},{"location":"api_endpoints/#exemplo-de-requisicao_3","title":"Exemplo de Requisi\u00e7\u00e3o","text":"<pre><code>GET /commercialization?year=2020\nAuthorization: Bearer token_de_acesso\n</code></pre>"},{"location":"api_endpoints/#exemplo-de-resposta_3","title":"Exemplo de Resposta","text":"<pre><code>[\n  {\n    \"category\": \"VINHO DE MESA\",\n    \"product\": \"Tinto\",\n    \"quantity\": 50000,\n    \"unit\": \"L\",\n    \"measurement\": \"volume\",\n    \"year\": 2020\n  }\n]\n</code></pre>"},{"location":"api_endpoints/#5-get-importing","title":"5. GET /importing","text":""},{"location":"api_endpoints/#descricao_4","title":"Descri\u00e7\u00e3o","text":"<p>Retorna dados sobre a importa\u00e7\u00e3o de derivados de uva.</p>"},{"location":"api_endpoints/#parametros_4","title":"Par\u00e2metros","text":"<ul> <li>year: Ano de refer\u00eancia (integer, obrigat\u00f3rio).</li> </ul>"},{"location":"api_endpoints/#exemplo-de-requisicao_4","title":"Exemplo de Requisi\u00e7\u00e3o","text":"<pre><code>GET /importing?year=2020\nAuthorization: Bearer token_de_acesso\n</code></pre>"},{"location":"api_endpoints/#exemplo-de-resposta_4","title":"Exemplo de Resposta","text":"<pre><code>[\n  {\n    \"group\": \"Vinhos de mesa\",\n    \"country\": \"Alemanha\",\n    \"quantity\": 136992,\n    \"unit\": \"Kg\",\n    \"measurement\": \"mass\",\n    \"value\": 504168,\n    \"currency\": \"US$\",\n    \"year\": 2020\n  }\n]\n</code></pre>"},{"location":"api_endpoints/#6-get-exporting","title":"6. GET /exporting","text":""},{"location":"api_endpoints/#descricao_5","title":"Descri\u00e7\u00e3o","text":"<p>Retorna dados sobre a exporta\u00e7\u00e3o de derivados de uva.</p>"},{"location":"api_endpoints/#parametros_5","title":"Par\u00e2metros","text":"<ul> <li>year: Ano de refer\u00eancia (integer, obrigat\u00f3rio).</li> </ul>"},{"location":"api_endpoints/#exemplo-de-requisicao_5","title":"Exemplo de Requisi\u00e7\u00e3o","text":"<pre><code>GET /exporting?year=2020\nAuthorization: Bearer token_de_acesso\n</code></pre>"},{"location":"api_endpoints/#exemplo-de-resposta_5","title":"Exemplo de Resposta","text":"<p>```json [   {     \"group\": \"Vinhos de mesa\",     \"country\": \"Fran\u00e7a\",     \"quantity\": 50000,     \"unit\": \"Kg\",     \"measurement\": \"mass\",     \"value\": 300000,     \"currency\": \"US$\",     \"year\": 2020   } ]</p>"},{"location":"classes_methods/","title":"Documenta\u00e7\u00e3o das Classes e M\u00e9todos da API","text":""},{"location":"classes_methods/#classes","title":"Classes","text":"<p>Como os retornos s\u00e3o iguais para algumas p\u00e1ginas, em alguns casos isso resultou em uma \u00fanica classe para 2 p\u00e1ginas diferentes. Essa abordagem foi feita pensando em seguir o princ\u00edpio DRY (Don\u00b4t Repeat Yourself), ainda que isso viole os princ\u00edpios OCP (Open-closed principle) e o SRP (Single Responsability Principle) do SOLID. Essa escolha deliberada visa simplificar o c\u00f3digo e como aqui est\u00e1 sendo utilizado apenas para fins acad\u00eamicos, n\u00e3o foi considerada prejudicial para o resultado final.</p>"},{"location":"classes_methods/#1-production_or_commercialization","title":"1. <code>Production_or_Commercialization</code>","text":"<p>Esta classe representa os dados relacionados \u00e0 produ\u00e7\u00e3o ou comercializa\u00e7\u00e3o de produtos derivados de uva. </p>"},{"location":"classes_methods/#atributos","title":"Atributos","text":"<ul> <li>category: Categoria do produto (ex: VINHO DE MESA).</li> <li>product: Tipo do produto (ex: Tinto).</li> <li>quantity: Quantidade anual (ex: 103916391).</li> <li>unit: Unidade de medida (ex: L).</li> <li>measurement: Grandeza medida (ex: volume).</li> <li>year: Ano de refer\u00eancia (ex: 2020).</li> </ul>"},{"location":"classes_methods/#2-processing","title":"2. <code>Processing</code>","text":"<p>Esta classe representa os dados relacionados ao processamento de uvas.</p>"},{"location":"classes_methods/#atributos_1","title":"Atributos","text":"<ul> <li>group: Grupo da uva (ex: Vin\u00edferas).</li> <li>category: Categoria do cultivo (ex: TINTAS).</li> <li>farm: Casta de cultivo (ex: TIAlicante Bouschet).</li> <li>quantity: Quantidade anual (ex: 2272985).</li> <li>unit: Unidade de medida (ex: Kg).</li> <li>measurement: Grandeza medida (ex: mass).</li> <li>year: Ano de refer\u00eancia (ex: 2020).</li> </ul>"},{"location":"classes_methods/#3-importing_or_exporting","title":"3. <code>Importing_or_Exporting</code>","text":"<p>Esta classe representa os dados relacionados \u00e0 importa\u00e7\u00e3o ou exporta\u00e7\u00e3o de produtos derivados de uva.</p>"},{"location":"classes_methods/#atributos_2","title":"Atributos","text":"<ul> <li>group: Grupo de derivados de uva (ex: Vinhos de mesa).</li> <li>country: Pa\u00eds comercializante (ex: Alemanha).</li> <li>quantity: Quantidade comercializada (ex: 136992).</li> <li>unit: Unidade de medida (ex: Kg).</li> <li>measurement: Grandeza medida (ex: mass).</li> <li>value: Valor transacionado (ex: 504168).</li> <li>currency: Moeda (ex: US$).</li> <li>year: Ano de refer\u00eancia (ex: 2020).</li> </ul>"},{"location":"classes_methods/#metodos","title":"M\u00e9todos","text":""},{"location":"classes_methods/#1-create_access_tokendata-dict-expires_delta-int","title":"1. <code>create_access_token(data: dict, expires_delta: int)</code>","text":"<p>Cria um token de acesso JWT para um usu\u00e1rio.</p>"},{"location":"classes_methods/#parametros","title":"Par\u00e2metros","text":"<ul> <li>data: Dados a serem inclu\u00eddos no token (dicion\u00e1rio).</li> <li>expires_delta: Tempo de expira\u00e7\u00e3o do token em minutos (opcional).</li> </ul>"},{"location":"classes_methods/#2-verify_passwordplain_password-str-hashed_password-str-bool","title":"2. <code>verify_password(plain_password: str, hashed_password: str) -&gt; bool</code>","text":"<p>Verifica se a senha fornecida corresponde ao hash armazenado.</p>"},{"location":"classes_methods/#parametros_1","title":"Par\u00e2metros","text":"<ul> <li>plain_password: Senha em texto simples.</li> <li>hashed_password: Hash da senha armazenada.</li> </ul>"},{"location":"classes_methods/#3-jwt_authcredentials-httpauthorizationcredentials","title":"3. <code>jwt_auth(credentials: HTTPAuthorizationCredentials)</code>","text":"<p>Autentica um usu\u00e1rio com base no token JWT fornecido.</p>"},{"location":"classes_methods/#parametros_2","title":"Par\u00e2metros","text":"<ul> <li>credentials: Credenciais de autoriza\u00e7\u00e3o (HTTPBearer).</li> </ul>"},{"location":"classes_methods/#4-run_scrapingyear-int-option-str","title":"4. <code>run_scraping(year: int, option: str)</code>","text":"<p>Executa o scraping de dados com base no ano e na op\u00e7\u00e3o fornecidos.</p>"},{"location":"classes_methods/#parametros_3","title":"Par\u00e2metros","text":"<ul> <li>year: Ano de refer\u00eancia para o scraping.</li> <li>option: Op\u00e7\u00e3o que determina qual tipo de dados ser\u00e1 coletado.</li> </ul>"},{"location":"classes_methods/#conclusao","title":"Conclus\u00e3o","text":"<p>Esta documenta\u00e7\u00e3o fornece uma vis\u00e3o geral das classes e m\u00e9todos utilizados na API, facilitando a compreens\u00e3o de como os dados s\u00e3o manipulados e processados.</p>"},{"location":"database_structure/","title":"Estrutura do Banco de Dados","text":""},{"location":"database_structure/#tabela-de-usuarios","title":"Tabela de Usu\u00e1rios","text":"<p>A tabela de usu\u00e1rios \u00e9 respons\u00e1vel por armazenar as informa\u00e7\u00f5es de registro dos usu\u00e1rios que utilizar\u00e3o a API. A estrutura da tabela \u00e9 a seguinte:</p> Campo Tipo Descri\u00e7\u00e3o id Integer (PK) Identificador \u00fanico do usu\u00e1rio. username String (Unique) Nome de usu\u00e1rio \u00fanico. password_hash String Hash da senha do usu\u00e1rio. created_at DateTime Data e hora de cria\u00e7\u00e3o do registro."},{"location":"database_structure/#exemplo-de-insercao","title":"Exemplo de Inser\u00e7\u00e3o","text":"<pre><code>INSERT INTO users (username, password_hash, created_at) VALUES ('usuario_exemplo', 'hash_da_senha', NOW());\n</code></pre>"},{"location":"database_structure/#consideracoes","title":"Considera\u00e7\u00f5es","text":"<ul> <li>O campo <code>username</code> deve ser \u00fanico para cada usu\u00e1rio.</li> <li>As senhas devem ser armazenadas como hashes para garantir a seguran\u00e7a.</li> </ul>"},{"location":"overview/","title":"Overview","text":""},{"location":"overview/#fluxo-de-requisicao","title":"Fluxo de Requisi\u00e7\u00e3o","text":"<p>A requisi\u00e7\u00e3o \u00e0 API \u00e9 iniciada no arquivo <code>main_api.py</code>, onde os endpoints s\u00e3o definidos. Quando um cliente faz uma requisi\u00e7\u00e3o a um endpoint, o FastAPI direciona essa requisi\u00e7\u00e3o para a fun\u00e7\u00e3o correspondente.</p>"},{"location":"overview/#funcionamento-dos-servicos","title":"Funcionamento dos Servi\u00e7os","text":"<p>Cada endpoint chama um servi\u00e7o espec\u00edfico, que cont\u00e9m a l\u00f3gica de neg\u00f3cios necess\u00e1ria para processar a requisi\u00e7\u00e3o. Por exemplo, ao chamar o endpoint <code>/production</code>, a fun\u00e7\u00e3o correspondente invoca o servi\u00e7o que realiza o scraping dos dados de produ\u00e7\u00e3o. Os servi\u00e7os utilizam fun\u00e7\u00f5es auxiliares para processar os dados e retornar as informa\u00e7\u00f5es necess\u00e1rias.</p>"},{"location":"overview/#uso-de-dicionarios","title":"Uso de Dicion\u00e1rios","text":"<p>Os servi\u00e7os fazem uso de dicion\u00e1rios definidos no arquivo <code>mappers.py</code> para mapear op\u00e7\u00f5es de scraping a grupos de dados. Esses dicion\u00e1rios ajudam a organizar e simplificar o c\u00f3digo, permitindo que os servi\u00e7os acessem rapidamente as informa\u00e7\u00f5es necess\u00e1rias para processar as requisi\u00e7\u00f5es.</p>"},{"location":"overview/#visao-geral-da-api","title":"Vis\u00e3o Geral da API","text":""},{"location":"overview/#introducao","title":"Introdu\u00e7\u00e3o","text":"<p>Esta API serve como um servi\u00e7o de backend para gerenciar informa\u00e7\u00f5es sobre a produ\u00e7\u00e3o, processamento, comercializa\u00e7\u00e3o, importa\u00e7\u00e3o e exporta\u00e7\u00e3o de uvas e seus derivados no Estado do Rio Grande do Sul. Ela fornece um conjunto de endpoints que permitem que os clientes interajam com os dados e realizem opera\u00e7\u00f5es espec\u00edficas.</p>"},{"location":"overview/#funcionalidades","title":"Funcionalidades","text":"<ul> <li>Autentica\u00e7\u00e3o de Usu\u00e1rio: Processos seguros de login e registro utilizando JWT.</li> <li>Gerenciamento de Dados: Opera\u00e7\u00f5es CRUD para gerenciar informa\u00e7\u00f5es sobre produ\u00e7\u00e3o, processamento, importa\u00e7\u00e3o e exporta\u00e7\u00e3o de uvas.</li> <li>Web Scraping: Coleta de dados em tempo real sobre a produ\u00e7\u00e3o e comercializa\u00e7\u00e3o de uvas.</li> </ul>"},{"location":"overview/#estrutura-do-banco-de-dados","title":"Estrutura do Banco de Dados","text":"<p>A estrutura do banco de dados \u00e9 utilizada para armazenar dados de registro de usu\u00e1rios que utilizar\u00e3o a API. O banco de dados cont\u00e9m uma tabela de usu\u00e1rios com os seguintes campos:</p> <ul> <li>id: Identificador \u00fanico do usu\u00e1rio.</li> <li>username: Nome de usu\u00e1rio \u00fanico.</li> <li>password_hash: Hash da senha do usu\u00e1rio.</li> <li>created_at: Data e hora de cria\u00e7\u00e3o do registro.</li> </ul> <p>Os dados obtidos atrav\u00e9s do scraping s\u00e3o representados pelos seguintes modelos:</p>"},{"location":"overview/#1-production_or_commercialization","title":"1. <code>Production_or_Commercialization</code>","text":"<ul> <li>category: Categoria do produto (ex: VINHO DE MESA)</li> <li>product: Tipo do produto (ex: Tinto)</li> <li>quantity: Quantidade anual (ex: 103916391)</li> <li>unit: Unidade de medida (ex: L)</li> <li>measurement: Grandeza medida (ex: volume)</li> <li>year: Ano de refer\u00eancia (ex: 2020)</li> </ul>"},{"location":"overview/#2-processing","title":"2. <code>Processing</code>","text":"<ul> <li>group: Grupo da uva (ex: Vin\u00edferas)</li> <li>category: Categoria do cultivo (ex: TINTAS)</li> <li>farm: Casta de cultivo (ex: TIAlicante Bouschet)</li> <li>quantity: Quantidade anual (ex: 2272985)</li> <li>unit: Unidade de medida (ex: Kg)</li> <li>measurement: Grandeza medida (ex: mass)</li> <li>year: Ano de refer\u00eancia (ex: 2020)</li> </ul>"},{"location":"overview/#3-importing_or_exporting","title":"3. <code>Importing_or_Exporting</code>","text":"<ul> <li>group: Grupo de derivados de uva (ex: Vinhos de mesa)</li> <li>country: Pa\u00eds comercializante (ex: Alemanha)</li> <li>quantity: Quantidade comercializada (ex: 136992)</li> <li>unit: Unidade de medida (ex: Kg)</li> <li>measurement: Grandeza medida (ex: mass)</li> <li>value: Valor transacionado (ex: 504168)</li> <li>currency: Moeda (ex: US$)</li> <li>year: Ano de refer\u00eancia (ex: 2020)</li> </ul>"},{"location":"overview/#endpoints-da-api","title":"Endpoints da API","text":"<p>A API possui os seguintes endpoints principais:</p> <ul> <li>POST /login: Autentica um usu\u00e1rio e retorna um token de acesso.</li> <li>GET /production: Retorna dados sobre a produ\u00e7\u00e3o de vinhos, sucos e derivados.</li> <li>GET /processing: Retorna a quantidade de uvas processadas.</li> <li>GET /commercialization: Retorna dados sobre a comercializa\u00e7\u00e3o de vinhos e derivados.</li> <li>GET /importing: Retorna dados sobre a importa\u00e7\u00e3o de derivados de uva.</li> <li>GET /exporting: Retorna dados sobre a exporta\u00e7\u00e3o de derivados de uva.</li> </ul>"},{"location":"overview/#fluxo-de-autenticacao","title":"Fluxo de Autentica\u00e7\u00e3o","text":"<p>A autentica\u00e7\u00e3o \u00e9 gerenciada atrav\u00e9s de JWT. O usu\u00e1rio deve fornecer um nome de usu\u00e1rio e senha para obter um token de acesso. Este token deve ser inclu\u00eddo em todas as requisi\u00e7\u00f5es subsequentes para acessar os endpoints protegidos.</p>"},{"location":"services_functionality/","title":"Funcionamento do services.py","text":""},{"location":"services_functionality/#introducao","title":"Introdu\u00e7\u00e3o","text":"<p>O arquivo <code>services.py</code> cont\u00e9m a l\u00f3gica de neg\u00f3cios da API, respons\u00e1vel por realizar o scraping de dados relacionados \u00e0 produ\u00e7\u00e3o, processamento, importa\u00e7\u00e3o e exporta\u00e7\u00e3o de uvas e seus derivados. Ele utiliza a biblioteca Playwright para acessar p\u00e1ginas da web e extrair informa\u00e7\u00f5es relevantes.</p>"},{"location":"services_functionality/#funcoes-principais","title":"Fun\u00e7\u00f5es Principais","text":""},{"location":"services_functionality/#1-run_scrapingyear-int-option-str","title":"1. <code>run_scraping(year: int, option: str)</code>","text":"<p>Esta fun\u00e7\u00e3o \u00e9 a entrada principal para iniciar o processo de scraping. Ela recebe um ano e uma op\u00e7\u00e3o que determina qual tipo de dados ser\u00e1 coletado.</p>"},{"location":"services_functionality/#parametros","title":"Par\u00e2metros","text":"<ul> <li>year: Ano de refer\u00eancia para o scraping.</li> <li>option: Op\u00e7\u00e3o que determina qual tipo de dados ser\u00e1 coletado.</li> </ul>"},{"location":"services_functionality/#funcionamento","title":"Funcionamento","text":"<ul> <li>A fun\u00e7\u00e3o inicializa um navegador headless usando Playwright.</li> <li>Chama a fun\u00e7\u00e3o correspondente ao tipo de dados a ser coletado, utilizando a op\u00e7\u00e3o fornecida.</li> <li>Retorna os dados processados.</li> </ul>"},{"location":"services_functionality/#2-function_iteratorpage-page-year-int-option-str","title":"2. <code>function_iterator(page: Page, year: int, option: str)</code>","text":"<p>Esta fun\u00e7\u00e3o itera sobre as p\u00e1ginas que cont\u00eam dados, chamando a fun\u00e7\u00e3o de processamento apropriada para cada aba.</p>"},{"location":"services_functionality/#parametros_1","title":"Par\u00e2metros","text":"<ul> <li>page: A p\u00e1gina do navegador onde o scraping est\u00e1 sendo realizado.</li> <li>year: Ano de refer\u00eancia.</li> <li>option: Op\u00e7\u00e3o que determina qual tipo de dados ser\u00e1 coletado.</li> </ul>"},{"location":"services_functionality/#funcionamento_1","title":"Funcionamento","text":"<ul> <li>A fun\u00e7\u00e3o determina quantas itera\u00e7\u00f5es s\u00e3o necess\u00e1rias com base na op\u00e7\u00e3o fornecida.</li> <li>Para cada itera\u00e7\u00e3o, chama a fun\u00e7\u00e3o <code>unique_iteration_processing</code>.</li> </ul>"},{"location":"services_functionality/#3-unique_iteration_processingpage-page-year-int-option-str-subopt-optionalint-none","title":"3. <code>unique_iteration_processing(page: Page, year: int, option: str, subopt: Optional[int] = None)</code>","text":"<p>Esta fun\u00e7\u00e3o \u00e9 respons\u00e1vel por processar uma \u00fanica itera\u00e7\u00e3o de scraping.</p>"},{"location":"services_functionality/#parametros_2","title":"Par\u00e2metros","text":"<ul> <li>page: A p\u00e1gina do navegador.</li> <li>year: Ano de refer\u00eancia.</li> <li>option: Op\u00e7\u00e3o que determina qual tipo de dados ser\u00e1 coletado.</li> <li>subopt: Subop\u00e7\u00e3o para p\u00e1ginas que t\u00eam v\u00e1rias abas (opcional).</li> </ul>"},{"location":"services_functionality/#funcionamento_2","title":"Funcionamento","text":"<ul> <li>A fun\u00e7\u00e3o constr\u00f3i a URL com base no ano e na op\u00e7\u00e3o.</li> <li>Acessa a URL e aguarda o carregamento do conte\u00fado.</li> <li>Extrai os dados da tabela e chama a fun\u00e7\u00e3o de processamento apropriada.</li> </ul>"},{"location":"services_functionality/#4-process_rows_by_optionoption-str-rows-listlocator-year-int-subopt-optionalint","title":"4. <code>process_rows_by_option(option: str, rows: List[Locator], year: int, subopt: Optional[int])</code>","text":"<p>Esta fun\u00e7\u00e3o processa as linhas da tabela de dados com base na op\u00e7\u00e3o fornecida.</p>"},{"location":"services_functionality/#parametros_3","title":"Par\u00e2metros","text":"<ul> <li>option: Op\u00e7\u00e3o que determina qual tipo de dados ser\u00e1 coletado.</li> <li>rows: Linhas da tabela a serem processadas.</li> <li>year: Ano de refer\u00eancia.</li> <li>subopt: Subop\u00e7\u00e3o para p\u00e1ginas que t\u00eam v\u00e1rias abas (opcional).</li> </ul>"},{"location":"services_functionality/#funcionamento_3","title":"Funcionamento","text":"<ul> <li>A fun\u00e7\u00e3o chama a fun\u00e7\u00e3o de processamento espec\u00edfica com base na op\u00e7\u00e3o.</li> <li>Retorna os dados processados.</li> </ul>"},{"location":"services_functionality/#5-funcoes-de-processamento-especificas","title":"5. Fun\u00e7\u00f5es de Processamento Espec\u00edficas","text":"<p>Existem v\u00e1rias fun\u00e7\u00f5es espec\u00edficas para processar diferentes tipos de dados, como <code>process_production_or_commercialization</code>, <code>process_processing</code>, e <code>process_importing_or_exporting</code>. Cada uma dessas fun\u00e7\u00f5es \u00e9 respons\u00e1vel por extrair e formatar os dados de acordo com a estrutura definida nas classes de modelo.</p>"},{"location":"services_functionality/#fluxo-de-dados","title":"Fluxo de Dados","text":"<p>O fluxo de dados no <code>services.py</code> come\u00e7a com a chamada da fun\u00e7\u00e3o <code>run_scraping</code>, que inicia o processo de scraping. A fun\u00e7\u00e3o itera sobre as p\u00e1ginas necess\u00e1rias, processa os dados e retorna as informa\u00e7\u00f5es formatadas. Os dicion\u00e1rios definidos no arquivo <code>mappers.py</code> s\u00e3o utilizados para mapear op\u00e7\u00f5es de scraping a grupos de dados, facilitando a organiza\u00e7\u00e3o e simplifica\u00e7\u00e3o do c\u00f3digo.</p>"},{"location":"services_functionality/#exemplos-de-uso","title":"Exemplos de Uso","text":"<p>Para utilizar os servi\u00e7os, um endpoint da API pode chamar a fun\u00e7\u00e3o <code>run_scraping</code> passando o ano e a op\u00e7\u00e3o desejada. Por exemplo, ao chamar o endpoint <code>/production</code>, a fun\u00e7\u00e3o correspondente invocar\u00e1 <code>run_scraping(2020, 'opt_02')</code> para coletar dados de produ\u00e7\u00e3o.</p>"}]}